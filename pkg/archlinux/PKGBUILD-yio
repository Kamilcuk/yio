# Maintainer: Kamil Cukrowski <kamilcukrowski@gmail.com>

pkgname=yio
pkgver=0
pkgrel=1
pkgdesc="Yio Input Output C Library that aims in type-safe printf replacement"
arch=('armv7h' 'i686' 'x86_64')
url="https://gitlab.com/kamcuk/yio/"
license=('GPL')
groups=()
depends=()
makedepends=(cmake m4 libunistring)
optdepends=('libunistring: unicode support')
provides=()
conflicts=()
replaces=()
backup=()
options=()
#source=("git+https://gitlab.com/kamcuk/yio/")
#md5sums=(SKIP)

prepare() {
	# Exported from makefile
	ln -nvsf "$YIO_SRCDIR" yio
}

pkgver() {
	cd yio
	git describe --tags | sed 's/-/./g'
}

build() {
	cmake \
		-B "build" \
		-S "yio" \
		-D CMAKE_BUILD_TYPE="Release" \
		-D CMAKE_C_FLAGS_RELEASE="-O2 -DNDEBUG -g -ffunction-sections -fdata-sections"
	cmake --build build
}

package() {
	cmake --install "build" --prefix "$pkgdir/usr"
}

